(()=>{var e={};e.id=672,e.ids=[672],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5190:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>p,tree:()=>d}),s(6132),s(2029),s(5866);var a=s(3191),r=s(8716),i=s(7922),n=s.n(i),l=s(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let d=["",{children:["review",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6132)),"/Users/moltbot/clawd/sage-dashboard-v2/src/app/review/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"/Users/moltbot/clawd/sage-dashboard-v2/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/moltbot/clawd/sage-dashboard-v2/src/app/review/page.tsx"],m="/review/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/review/page",pathname:"/review",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8432:(e,t,s)=>{Promise.resolve().then(s.bind(s,8011))},7358:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},8393:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},8998:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1137:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},4019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8011:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>P});var a=s(326),r=s(7577),i=s(1137),n=s(2714),l=s(6557);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,l.Z)("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);var d=s(4659);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,l.Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),m=(0,l.Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var x=s(8393),p=s(617),h=s(5329),u=s(6792),g=s(9837),v=s(1223);let f={review:n.Z,decision:c,approval:d.Z,info:o},j={low:"secondary",medium:"outline",high:"warning",urgent:"danger"};function y({ticket:e,onApprove:t,onReject:s,onComment:i,onDefer:n}){let[l,c]=(0,r.useState)(!1),d=f[e.type];return(0,a.jsxs)(h.Zb,{className:"hover:bg-bg-tertiary transition-colors",children:[a.jsx(h.Ol,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(d,{className:"w-5 h-5 text-accent-amber"}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-lg",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(u.C,{variant:j[e.priority],children:e.priority}),a.jsx("span",{className:"text-sm text-text-muted",children:(0,v.SY)(e.created_at)})]})]})]}),e.project_id&&a.jsx("div",{className:"text-sm text-text-muted",children:"Project linked"})]})}),(0,a.jsxs)(h.aY,{className:"pt-0",children:[a.jsx("p",{className:"text-sm text-text-secondary mb-4",children:l?e.description:(0,v.aF)(e.description,120)}),e.description.length>120&&a.jsx("button",{onClick:()=>c(!l),className:"text-accent-amber hover:text-accent-amber/80 text-sm font-medium mb-4 flex items-center gap-1",children:l?(0,a.jsxs)(a.Fragment,{children:[a.jsx(m,{className:"w-4 h-4"}),"Show less"]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(x.Z,{className:"w-4 h-4"}),"Show more"]})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(g.z,{size:"sm",variant:"success",onClick:()=>t(e.id),children:"Approve"}),a.jsx(g.z,{size:"sm",variant:"danger",onClick:()=>s(e.id,""),children:"Reject"}),(0,a.jsxs)(g.z,{size:"sm",variant:"outline",onClick:()=>i(e.id),children:[a.jsx(p.Z,{className:"w-4 h-4 mr-1"}),"Comment"]}),a.jsx(g.z,{size:"sm",variant:"secondary",onClick:()=>n(e.id),children:"Defer"})]})]})]})}function b({tickets:e,isLoading:t,onApprove:s,onReject:n,onComment:l,onDefer:c}){let[d,o]=(0,r.useState)("all"),m=(0,r.useMemo)(()=>"all"===d?e:e.filter(e=>e.type===d),[e,d]),x=e.filter(e=>"pending"===e.status).length;return t?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-6 bg-bg-tertiary rounded animate-pulse w-32"}),a.jsx("div",{className:"h-6 bg-bg-tertiary rounded animate-pulse w-16"})]}),Array.from({length:3}).map((e,t)=>a.jsx("div",{className:"h-32 bg-bg-tertiary rounded-lg animate-pulse"},t))]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Pending Review"}),x>0&&a.jsx(u.C,{variant:"warning",className:"animate-pulse",children:x})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(i.Z,{className:"w-4 h-4 text-text-muted"}),a.jsx("div",{className:"flex gap-1",children:["all","review","decision","approval","info"].map(e=>a.jsx(g.z,{size:"sm",variant:d===e?"default":"ghost",onClick:()=>o(e),className:"capitalize",children:e},e))})]})]}),0===m.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-text-muted mb-2",children:"all"===d?"No pending reviews":`No ${d} tickets`}),a.jsx("p",{className:"text-sm text-text-muted",children:"all"===d?"No pending reviews":`No ${d} tickets match your filter.`})]}):a.jsx("div",{className:"space-y-4",children:m.map(e=>a.jsx(y,{ticket:e,onApprove:s,onReject:n,onComment:l,onDefer:c},e.id))})]})}var N=s(4019),w=s(8998),k=s(9635);let _={review:n.Z,decision:c,approval:d.Z,info:o},C={low:"secondary",medium:"outline",high:"warning",urgent:"danger"};function z({ticket:e,isOpen:t,onClose:s,onApprove:i,onReject:n,onDefer:l}){let[c,d]=(0,r.useState)(""),[o,m]=(0,r.useState)(!1);if(!t||!e)return null;let x=_[e.type],p=async()=>{m(!0),await i(e.id,c||void 0),m(!1),s()},h=async()=>{c.trim()&&(m(!0),await n(e.id,c),m(!1),s())},f=async()=>{m(!0),await l(e.id),m(!1),s()};return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-bg-secondary rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-bg-secondary border-b border-border-subtle p-6 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(x,{className:"w-6 h-6 text-accent-amber"}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-semibold",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(u.C,{variant:C[e.priority],children:e.priority}),a.jsx("span",{className:"text-sm text-text-muted capitalize",children:e.type})]})]})]}),a.jsx(g.z,{variant:"ghost",size:"icon",onClick:s,children:a.jsx(N.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-medium mb-2",children:"Description"}),a.jsx("p",{className:"text-text-secondary whitespace-pre-wrap",children:e.description})]}),(e.project_id||e.task_id)&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-medium mb-2",children:"Linked Items"}),(0,a.jsxs)("div",{className:"space-y-2",children:[e.project_id&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("div",{className:"w-2 h-2 bg-accent-blue rounded-full"}),(0,a.jsxs)("span",{children:["Project: ",e.project_id]})]}),e.task_id&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("div",{className:"w-2 h-2 bg-accent-green rounded-full"}),(0,a.jsxs)("span",{children:["Task: ",e.task_id]})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-medium mb-2",children:"Metadata"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(w.Z,{className:"w-4 h-4 text-text-muted"}),(0,a.jsxs)("span",{children:["Created ",(0,v.SY)(e.created_at)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(k.Z,{className:"w-4 h-4 text-text-muted"}),(0,a.jsxs)("span",{children:["By ",e.created_by]})]})]})]}),e.history&&e.history.length>0&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-medium mb-2",children:"History"}),a.jsx("div",{className:"space-y-2",children:e.history.map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-bg-tertiary rounded-md",children:[a.jsx("div",{className:"w-2 h-2 bg-accent-amber rounded-full mt-2"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium capitalize",children:e.action}),(0,a.jsxs)("span",{className:"text-xs text-text-muted",children:[(0,v.SY)(e.created_at)," by ",e.created_by]})]}),e.comment&&a.jsx("p",{className:"text-sm text-text-secondary",children:e.comment})]})]},e.id))})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-medium mb-2",children:"Resolution Note"}),a.jsx("textarea",{value:c,onChange:e=>d(e.target.value),placeholder:"Add a comment for this action...",className:"w-full h-24 bg-bg-tertiary border border-border-subtle rounded-md px-3 py-2 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-accent-amber focus:border-transparent"})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-border-subtle",children:[a.jsx(g.z,{size:"lg",variant:"success",onClick:p,disabled:o,className:"flex-1",children:"Approve"}),a.jsx(g.z,{size:"lg",variant:"danger",onClick:h,disabled:o||!c.trim(),className:"flex-1",children:"Reject"}),a.jsx(g.z,{size:"lg",variant:"secondary",onClick:f,disabled:o,className:"flex-1",children:"Defer"})]})]})]})})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let S=(0,l.Z)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);var Z=s(7358);let D=[{id:"1",type:"review",title:"Sage Dashboard V2 UI Improvements",description:"Please review the new dashboard layout for Projects V2. The changes include improved navigation, better task management, and enhanced analytics views.",priority:"high",status:"pending",project_id:"proj-1",created_at:new Date(Date.now()-72e5).toISOString(),updated_at:new Date().toISOString(),created_by:"sage"},{id:"2",type:"decision",title:"API Rate Limiting Strategy",description:"Need to decide on the rate limiting approach for the new API endpoints. Options include fixed window, sliding window, or token bucket algorithms.",priority:"medium",status:"pending",created_at:new Date(Date.now()-144e5).toISOString(),updated_at:new Date().toISOString(),created_by:"sage"},{id:"3",type:"approval",title:"Database Schema Changes",description:"Approve the proposed changes to the user permissions table and related indexes for improved performance.",priority:"urgent",status:"pending",task_id:"task-1",created_at:new Date(Date.now()-18e5).toISOString(),updated_at:new Date().toISOString(),created_by:"sage"}];function P(){let[e]=(0,r.useState)(D),[t,s]=(0,r.useState)(null),[i,n]=(0,r.useState)(!1),[l,c]=(0,r.useState)("all"),[d,o]=(0,r.useState)("priority"),m=(0,r.useMemo)(()=>{let t=e;return"all"!==l&&(t=t.filter(e=>e.status===l)),t.sort((e,t)=>{if("priority"!==d)return new Date(t.created_at).getTime()-new Date(e.created_at).getTime();{let s={urgent:4,high:3,medium:2,low:1};return s[t.priority]-s[e.priority]}})},[e,l,d]),x=(e,t)=>{console.log("Approve ticket",e,t)},p=(e,t)=>{console.log("Reject ticket",e,t)},h=e=>{console.log("Defer ticket",e)};return(0,a.jsxs)("div",{className:"p-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Ticket Review"}),a.jsx("p",{className:"text-text-secondary mt-1",children:"Review and manage tickets from Sage â†’ Tim workflow"})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"Status:"}),["all","pending","approved","rejected"].map(e=>a.jsx(g.z,{size:"sm",variant:l===e?"default":"ghost",onClick:()=>c(e),className:"capitalize",children:e},e))]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"Sort:"}),(0,a.jsxs)(g.z,{size:"sm",variant:"priority"===d?"default":"ghost",onClick:()=>o("priority"),className:"flex items-center gap-1",children:[a.jsx(S,{className:"w-4 h-4"}),"Priority"]}),(0,a.jsxs)(g.z,{size:"sm",variant:"date"===d?"default":"ghost",onClick:()=>o("date"),className:"flex items-center gap-1",children:[a.jsx(Z.Z,{className:"w-4 h-4"}),"Date"]})]})]}),a.jsx(b,{tickets:m,onApprove:x,onReject:p,onComment:t=>{let a=e.find(e=>e.id===t);a&&(s(a),n(!0))},onDefer:h}),a.jsx(z,{ticket:t,isOpen:i,onClose:()=>{n(!1),s(null)},onApprove:x,onReject:p,onDefer:h})]})}},9837:(e,t,s)=>{"use strict";s.d(t,{z:()=>c});var a=s(326),r=s(7577),i=s(9360),n=s(1223);let l=(0,i.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-bg-primary",{variants:{variant:{default:"bg-accent-blue text-white hover:bg-accent-blue/80",secondary:"bg-bg-tertiary text-text-primary hover:bg-bg-tertiary/80",outline:"border border-border-default bg-transparent text-text-primary hover:bg-bg-tertiary",ghost:"bg-transparent text-text-primary hover:bg-bg-tertiary",success:"bg-accent-green text-white hover:bg-accent-green/80",danger:"bg-accent-red text-white hover:bg-accent-red/80"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=(0,r.forwardRef)(({className:e,variant:t,size:s,asChild:r=!1,...i},c)=>a.jsx("button",{className:(0,n.cn)(l({variant:t,size:s,className:e})),ref:c,...i}));c.displayName="Button"},5329:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>l,Zb:()=>n,aY:()=>d,ll:()=>c});var a=s(326),r=s(7577),i=s(1223);let n=(0,r.forwardRef)(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("rounded-lg border border-border-subtle bg-bg-secondary text-text-primary shadow-sm",e),...t}));n.displayName="Card";let l=(0,r.forwardRef)(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let c=(0,r.forwardRef)(({className:e,...t},s)=>a.jsx("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));c.displayName="CardTitle",(0,r.forwardRef)(({className:e,...t},s)=>a.jsx("p",{ref:s,className:(0,i.cn)("text-sm text-text-muted",e),...t})).displayName="CardDescription";let d=(0,r.forwardRef)(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",(0,r.forwardRef)(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},6132:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>l});var a=s(8570);let r=(0,a.createProxy)(String.raw`/Users/moltbot/clawd/sage-dashboard-v2/src/app/review/page.tsx`),{__esModule:i,$$typeof:n}=r;r.default;let l=(0,a.createProxy)(String.raw`/Users/moltbot/clawd/sage-dashboard-v2/src/app/review/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[214,845],()=>s(5190));module.exports=a})();