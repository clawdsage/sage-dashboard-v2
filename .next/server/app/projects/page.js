(()=>{var e={};e.id=895,e.ids=[895],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3099:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>o,routeModule:()=>x,tree:()=>d}),s(7625),s(2029),s(5866);var a=s(3191),r=s(8716),l=s(7922),i=s.n(l),n=s(5231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let d=["",{children:["projects",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7625)),"/Users/moltbot/clawd/sage-dashboard-v2/src/app/projects/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"/Users/moltbot/clawd/sage-dashboard-v2/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/moltbot/clawd/sage-dashboard-v2/src/app/projects/page.tsx"],u="/projects/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/projects/page",pathname:"/projects",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9044:(e,t,s)=>{Promise.resolve().then(s.bind(s,6890))},1137:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},3855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6890:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var a=s(326),r=s(7577),l=s(9837),i=s(5329),n=s(58),c=s(5047),d=s(6792);function o({project:e}){let t=(0,c.useRouter)(),s=e.task_count>0?e.completed_tasks/e.task_count*100:0;return a.jsx(n.E.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:a.jsx(i.Zb,{className:"cursor-pointer hover:shadow-lg transition-shadow duration-200",onClick:()=>{t.push(`/projects/${e.id}`)},children:a.jsx(i.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color||"#3b82f6"}}),a.jsx("h3",{className:"text-lg font-semibold",children:e.name})]}),(e=>{switch(e){case"active":return a.jsx(d.C,{variant:"success",children:"Active"});case"completed":return a.jsx(d.C,{variant:"secondary",children:"Completed"});case"on_hold":return a.jsx(d.C,{variant:"warning",children:"On Hold"});default:return a.jsx(d.C,{variant:"default",children:e})}})(e.status)]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-text-secondary",children:[e.completed_tasks," / ",e.task_count," tasks"]}),(0,a.jsxs)("span",{className:"text-text-muted",children:[Math.round(s),"%"]})]}),a.jsx("div",{className:"w-full bg-bg-tertiary rounded-full h-2",children:a.jsx(n.E.div,{className:"bg-accent-blue h-2 rounded-full",initial:{width:0},animate:{width:`${s}%`},transition:{duration:.8,ease:"easeOut"}})})]}),e.due_date&&(0,a.jsxs)("div",{className:`text-sm ${(e=>{if(!e)return"text-text-muted";let t=new Date,s=Math.ceil((new Date(e).getTime()-t.getTime())/864e5);return s<0?"text-text-red":s<=3?"text-accent-amber":"text-text-muted"})(e.due_date)}`,children:["Due: ",new Date(e.due_date).toLocaleDateString()]}),a.jsx("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(e=>{switch(e){case"high":return a.jsx(d.C,{variant:"danger",children:"High"});case"medium":return a.jsx(d.C,{variant:"warning",children:"Medium"});case"low":return a.jsx(d.C,{variant:"secondary",children:"Low"});default:return null}})(e.priority),e.tags&&e.tags.map((e,t)=>a.jsx(d.C,{variant:"outline",className:"text-xs",children:e},t))]})})]})})})})}var u=s(8307),m=s(1137);function x({projects:e,isLoading:t}){let[s,c]=(0,r.useState)("all"),[d,x]=(0,r.useState)(""),[p,b]=(0,r.useState)("name"),g=(0,r.useMemo)(()=>{let t=e.filter(e=>("active"!==s||"active"===e.status)&&("completed"!==s||"completed"===e.status)&&("mine"!==s||"sage"===e.owner)&&(!d||!!e.name.toLowerCase().includes(d.toLowerCase())));return t.sort((e,t)=>{switch(p){case"priority":let s={high:3,medium:2,low:1};return(s[t.priority]||0)-(s[e.priority]||0);case"due_date":if(!e.due_date&&!t.due_date)return 0;if(!e.due_date)return 1;if(!t.due_date)return -1;return new Date(e.due_date).getTime()-new Date(t.due_date).getTime();case"progress":let a=e.task_count>0?e.completed_tasks/e.task_count:0;return(t.task_count>0?t.completed_tasks/t.task_count:0)-a;default:return e.name.localeCompare(t.name)}}),t},[e,s,d,p]);return t?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>a.jsx(i.Zb,{className:"animate-pulse",children:a.jsx(i.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-4 h-4 bg-bg-tertiary rounded-full"}),a.jsx("div",{className:"h-6 bg-bg-tertiary rounded w-32"})]}),a.jsx("div",{className:"h-4 bg-bg-tertiary rounded w-full"}),a.jsx("div",{className:"h-2 bg-bg-tertiary rounded w-full"})]})})},t))}):0===e.length?(0,a.jsxs)(i.Zb,{className:"p-12 text-center",children:[a.jsx("h3",{className:"text-lg font-medium mb-2",children:"No projects yet"}),a.jsx("p",{className:"text-text-muted mb-4",children:"Create your first project to start organizing your tasks."}),a.jsx(l.z,{children:"Create Project"})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[a.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"mine",label:"Mine"},{value:"completed",label:"Completed"}].map(e=>a.jsx(l.z,{variant:s===e.value?"default":"outline",size:"sm",onClick:()=>c(e.value),children:e.label},e.value))}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-text-muted"}),a.jsx("input",{type:"text",placeholder:"Search projects...",value:d,onChange:e=>x(e.target.value),className:"pl-10 pr-4 py-2 bg-bg-primary border border-border-default rounded-md focus:outline-none focus:ring-2 focus:ring-accent-blue text-sm w-64"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(m.Z,{className:"h-4 w-4 text-text-muted"}),a.jsx("select",{value:p,onChange:e=>b(e.target.value),className:"bg-bg-primary border border-border-default rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent-blue text-sm",children:[{value:"priority",label:"Priority"},{value:"due_date",label:"Due Date"},{value:"progress",label:"Progress"},{value:"name",label:"Name"}].map(e=>(0,a.jsxs)("option",{value:e.value,children:["Sort by ",e.label]},e.value))})]})]})]}),0===g.length?(0,a.jsxs)(i.Zb,{className:"p-12 text-center",children:[a.jsx("h3",{className:"text-lg font-medium mb-2",children:"No projects found"}),a.jsx("p",{className:"text-text-muted",children:"Try adjusting your filters or search terms."})]}):a.jsx(n.E.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:g.map(e=>a.jsx(o,{project:e},e.id))})]})}var p=s(8129),b=s(4019),g=s(3855);let h=["#3b82f6","#22c55e","#f59e0b","#ef4444","#a855f7","#06b6d4","#84cc16","#f97316"],f=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],j=[{value:"sage",label:"Sage"},{value:"tim",label:"Tim"},{value:"both",label:"Both"}];function v({isOpen:e,onClose:t,onCreate:s,isLoading:i,initialData:c}){let[d,o]=(0,r.useState)(c?.name||""),[u,m]=(0,r.useState)(c?.description||""),[x,v]=(0,r.useState)(c?.color||h[0]),[y,N]=(0,r.useState)(c?.priority||"medium"),[w,C]=(0,r.useState)(c?.due_date||""),[k,_]=(0,r.useState)(c?.tags||[]),[P,S]=(0,r.useState)(""),[Z,q]=(0,r.useState)(c?.owner||"sage"),z=()=>{P.trim()&&!k.includes(P.trim())&&(_([...k,P.trim()]),S(""))},D=e=>{_(k.filter(t=>t!==e))};return a.jsx(p.M,{children:e&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(n.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50",onClick:t}),a.jsx(n.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-bg-secondary border border-border-subtle rounded-lg shadow-lg w-full max-w-md",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border-subtle",children:[a.jsx("h2",{className:"text-lg font-semibold",children:c?"Edit Project":"Create New Project"}),a.jsx(l.z,{variant:"ghost",size:"icon",onClick:t,children:a.jsx(b.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d.trim()&&(s({name:d.trim(),description:u.trim()||void 0,color:x,status:c?.status||"active",priority:y,due_date:w||void 0,tags:k,owner:Z}),o(""),m(""),v(h[0]),N("medium"),C(""),_([]),S(""),q("sage"),t())},className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Project Name *"}),a.jsx("input",{type:"text",value:d,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 bg-bg-primary border border-border-default rounded-md focus:outline-none focus:ring-2 focus:ring-accent-blue",placeholder:"Enter project name",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),a.jsx("textarea",{value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 bg-bg-primary border border-border-default rounded-md focus:outline-none focus:ring-2 focus:ring-accent-blue resize-none",rows:3,placeholder:"Optional description"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Priority"}),a.jsx("select",{value:y,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 bg-bg-primary border border-border-default rounded-md focus:outline-none focus:ring-2 focus:ring-accent-blue",children:f.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Due Date"}),a.jsx("input",{type:"date",value:w,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 bg-bg-primary border border-border-default rounded-md focus:outline-none focus:ring-2 focus:ring-accent-blue"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tags"}),(0,a.jsxs)("div",{className:"flex space-x-2 mb-2",children:[a.jsx("input",{type:"text",value:P,onChange:e=>S(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),z()),className:"flex-1 px-3 py-2 bg-bg-primary border border-border-default rounded-md focus:outline-none focus:ring-2 focus:ring-accent-blue",placeholder:"Add a tag"}),a.jsx(l.z,{type:"button",onClick:z,size:"sm",children:a.jsx(g.Z,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:k.map((e,t)=>(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 bg-bg-tertiary text-text-primary text-sm rounded-md",children:[e,a.jsx("button",{type:"button",onClick:()=>D(e),className:"ml-2 text-text-muted hover:text-text-primary",children:a.jsx(b.Z,{className:"h-3 w-3"})})]},t))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Color"}),a.jsx("div",{className:"flex space-x-2",children:h.map(e=>a.jsx("button",{type:"button",onClick:()=>v(e),className:`w-8 h-8 rounded-full border-2 ${x===e?"border-text-primary":"border-border-default"}`,style:{backgroundColor:e}},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Owner"}),a.jsx("select",{value:Z,onChange:e=>q(e.target.value),className:"w-full px-3 py-2 bg-bg-primary border border-border-default rounded-md focus:outline-none focus:ring-2 focus:ring-accent-blue",children:j.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx(l.z,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),a.jsx(l.z,{type:"submit",disabled:!d.trim()||i,children:i?"Creating...":c?"Update Project":"Create Project"})]})]})]})})]})})}var y=s(4503);function N(){let{projects:e,isLoading:t,error:s}=(0,y.Z0)(),n=(0,y.Qs)(),[c,d]=(0,r.useState)(!1);return s?(0,a.jsxs)("div",{className:"p-6",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Projects"}),a.jsx(i.Zb,{className:"p-6",children:(0,a.jsxs)("p",{className:"text-text-red",children:["Error loading projects: ",s.message]})})]}):(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Projects"}),(0,a.jsxs)(l.z,{onClick:()=>d(!0),children:[a.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"New Project"]})]}),a.jsx(x,{projects:e,isLoading:t}),a.jsx(v,{isOpen:c,onClose:()=>d(!1),onCreate:e=>{let{name:t,description:s,color:a,status:r}=e;n.mutate({name:t,description:s,color:a,status:r,priority:"medium",progress:0,owner:"sage"})},isLoading:n.isPending})]})}},9837:(e,t,s)=>{"use strict";s.d(t,{z:()=>c});var a=s(326),r=s(7577),l=s(9360),i=s(1223);let n=(0,l.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-bg-primary",{variants:{variant:{default:"bg-accent-blue text-white hover:bg-accent-blue/80",secondary:"bg-bg-tertiary text-text-primary hover:bg-bg-tertiary/80",outline:"border border-border-default bg-transparent text-text-primary hover:bg-bg-tertiary",ghost:"bg-transparent text-text-primary hover:bg-bg-tertiary",success:"bg-accent-green text-white hover:bg-accent-green/80",danger:"bg-accent-red text-white hover:bg-accent-red/80"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=(0,r.forwardRef)(({className:e,variant:t,size:s,asChild:r=!1,...l},c)=>a.jsx("button",{className:(0,i.cn)(n({variant:t,size:s,className:e})),ref:c,...l}));c.displayName="Button"},5329:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>n,Zb:()=>i,aY:()=>d,ll:()=>c});var a=s(326),r=s(7577),l=s(1223);let i=(0,r.forwardRef)(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,l.cn)("rounded-lg border border-border-subtle bg-bg-secondary text-text-primary shadow-sm",e),...t}));i.displayName="Card";let n=(0,r.forwardRef)(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...t}));n.displayName="CardHeader";let c=(0,r.forwardRef)(({className:e,...t},s)=>a.jsx("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));c.displayName="CardTitle",(0,r.forwardRef)(({className:e,...t},s)=>a.jsx("p",{ref:s,className:(0,l.cn)("text-sm text-text-muted",e),...t})).displayName="CardDescription";let d=(0,r.forwardRef)(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,l.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",(0,r.forwardRef)(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},4503:(e,t,s)=>{"use strict";s.d(t,{PY:()=>c,Qs:()=>d,Z0:()=>n});var a=s(4976),r=s(7369),l=s(119);s(7577);var i=s(2777);function n(){(0,a.NL)();let e=(0,r.a)({queryKey:["projects"],queryFn:async()=>{let{data:e,error:t}=await i.O.from("projects").select("*").order("created_at",{ascending:!1});if(t)throw t;return e}});return{projects:e.data||[],isLoading:e.isLoading,error:e.error}}function c(e){(0,a.NL)();let t=(0,r.a)({queryKey:["project",e],queryFn:async()=>{let{data:t,error:s}=await i.O.from("projects").select("*").eq("id",e).single();if(s)throw s;let{data:a,error:r}=await i.O.from("tasks").select("*").eq("project_id",e).order("order_index",{ascending:!0});if(r)throw r;return{...t,tasks:a}},enabled:!!e});return{project:t.data,isLoading:t.isLoading,error:t.error}}function d(){let e=(0,a.NL)();return(0,l.D)({mutationFn:async e=>{let{data:t,error:s}=await i.O.from("projects").insert(e).select().single();if(s)throw s;return t},onSuccess:()=>{e.invalidateQueries({queryKey:["projects"]})}})}},7625:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>l,default:()=>n});var a=s(8570);let r=(0,a.createProxy)(String.raw`/Users/moltbot/clawd/sage-dashboard-v2/src/app/projects/page.tsx`),{__esModule:l,$$typeof:i}=r;r.default;let n=(0,a.createProxy)(String.raw`/Users/moltbot/clawd/sage-dashboard-v2/src/app/projects/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[214,971,845],()=>s(3099));module.exports=a})();