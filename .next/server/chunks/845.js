exports.id=845,exports.ids=[845],exports.modules={5615:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},8455:(e,t,r)=>{Promise.resolve().then(r.bind(r,7668))},7668:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>z});var s=r(326),a=r(7270),n=r.n(a);r(3824);var i=r(434),c=r(5047),l=r(5920),o=r(4061),d=r(8932),u=r(6464),m=r(6697),x=r(4659),h=r(1821),b=r(1223),g=r(6792);let f=[{name:"Dashboard",href:"/",icon:l.Z},{name:"Agents",href:"/agents",icon:o.Z},{name:"Projects",href:"/projects",icon:d.Z},{name:"Analytics",href:"/analytics",icon:u.Z},{name:"Activity",href:"/activity",icon:m.Z},{name:"Review",href:"/review",icon:x.Z}];function p({pendingReviewCount:e=0,activeAgentCount:t=0,todayCost:r=0}){let a=(0,c.usePathname)();return(0,s.jsxs)("div",{className:"w-60 bg-bg-secondary border-r border-border-subtle flex flex-col",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-border-subtle",children:[s.jsx("h1",{className:"text-xl font-bold text-accent-blue",children:"Sage"}),s.jsx("p",{className:"text-sm text-text-muted",children:"Dashboard V2"})]}),s.jsx("nav",{className:"flex-1 p-4 space-y-2",children:f.map(t=>{let r=a===t.href,n="Review"===t.name&&e>0;return(0,s.jsxs)(i.default,{href:t.href,className:(0,b.cn)("flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors relative",r?"bg-accent-blue text-white":"text-text-secondary hover:bg-bg-tertiary hover:text-text-primary"),children:[s.jsx(t.icon,{className:"mr-3 h-5 w-5"}),t.name,n&&s.jsx(g.C,{variant:"danger",className:"ml-auto text-xs px-1.5 py-0.5 h-5 min-w-5 flex items-center justify-center",children:e})]},t.name)})}),(0,s.jsxs)("div",{className:"p-4 border-t border-border-subtle space-y-3",children:[s.jsx("h3",{className:"text-sm font-medium text-text-secondary",children:"Quick Stats"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsxs)("span",{className:"flex items-center",children:[s.jsx(m.Z,{className:"mr-2 h-4 w-4 text-accent-green"}),"Active"]}),s.jsx("span",{className:"font-medium",children:t})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsxs)("span",{className:"flex items-center",children:[s.jsx(h.Z,{className:"mr-2 h-4 w-4 text-accent-amber"}),"Today"]}),(0,s.jsxs)("span",{className:"font-medium",children:["$",r.toFixed(2)]})]})]})]})]})}var v=r(8360),w=r(2216),y=r(1584),j=r(2607),N=r(5691),S=r(2714),Z=r(732),_=r(8307),I=r(6507),O=r(9635),k=r(7577),D=r(2777),q=r(617);function P({count:e,onClick:t}){return 0===e?null:(0,s.jsxs)("button",{onClick:t,className:"relative p-2 rounded-md hover:bg-bg-tertiary transition-colors",title:`${e} pending ticket${1===e?"":"s"}`,children:[s.jsx(q.Z,{className:"h-5 w-5"}),s.jsx(g.C,{variant:"warning",className:`absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center text-xs animate-pulse ${e>9?"px-1":""}`,children:e>99?"99+":e})]})}let C={thinking:s.jsx(v.Z,{className:"w-4 h-4"}),coding:s.jsx(w.Z,{className:"w-4 h-4"}),writing:s.jsx(y.Z,{className:"w-4 h-4"}),idle:s.jsx(j.Z,{className:"w-4 h-4"}),spawning:s.jsx(N.Z,{className:"w-4 h-4"}),reviewing:s.jsx(S.Z,{className:"w-4 h-4"})},F={thinking:"bg-purple-500/20 text-purple-400 border-purple-500/30",coding:"bg-blue-500/20 text-blue-400 border-blue-500/30",writing:"bg-green-500/20 text-green-400 border-green-500/30",idle:"bg-gray-500/20 text-gray-400 border-gray-500/30",spawning:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30",reviewing:"bg-pink-500/20 text-pink-400 border-pink-500/30"};function $(){let[e,t]=(0,k.useState)(null),[r]=(0,k.useState)(3);return s.jsx("header",{className:"bg-bg-secondary border-b border-border-subtle px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full border ${e?F[e.status]||F.idle:"bg-bg-tertiary border-border-subtle"}`,children:[(0,s.jsxs)("div",{className:"relative",children:[s.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),s.jsx("div",{className:"absolute inset-0 w-2 h-2 bg-green-400 rounded-full animate-ping opacity-50"})]}),s.jsx(Z.Z,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium text-sm",children:"Sage"}),e&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("span",{className:"text-text-muted",children:"â€¢"}),C[e.status]||s.jsx(j.Z,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm capitalize",children:e.status})]})]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"relative",children:[s.jsx(_.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-text-muted"}),s.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 bg-bg-tertiary border border-border-subtle rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-accent-blue focus:border-transparent"})]}),s.jsx(i.default,{href:"/review",children:s.jsx(P,{count:r})}),(0,s.jsxs)("button",{className:"p-2 rounded-md hover:bg-bg-tertiary transition-colors relative",children:[s.jsx(I.Z,{className:"h-5 w-5"}),s.jsx("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-accent-red rounded-full text-xs flex items-center justify-center",children:"2"})]}),(0,s.jsxs)("button",{className:"flex items-center space-x-2 p-2 rounded-md hover:bg-bg-tertiary transition-colors",children:[s.jsx("div",{className:"h-8 w-8 bg-accent-blue rounded-full flex items-center justify-center",children:s.jsx(O.Z,{className:"h-4 w-4 text-white"})}),s.jsx("span",{className:"text-sm font-medium",children:"Tim"})]})]})]})})}var M=r(8113),T=r(4976);let A=new M.S({defaultOptions:{queries:{staleTime:3e5,refetchOnWindowFocus:!1}}});function L({children:e}){return s.jsx(T.aH,{client:A,children:e})}var Q=r(4322),R=r(9843),J=r(7369);function K({children:e}){let{agents:t}=(0,R.P)(),{reviews:r}=(0,Q.k)(),a=t.filter(e=>"active"===e.status).length,{data:n=0}=(0,J.a)({queryKey:["todayCost"],queryFn:async()=>{let e=new Date().toISOString().split("T")[0],{data:t,error:r}=await D.O.from("subagent_runs").select("cost").gte("started_at",e).lt("started_at",new Date(new Date(e).getTime()+864e5).toISOString());if(r)throw r;return t.reduce((e,t)=>e+t.cost,0)}});return(0,s.jsxs)("div",{className:"flex h-screen",children:[s.jsx(p,{pendingReviewCount:r.length,activeAgentCount:a,todayCost:n}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx($,{}),s.jsx("main",{className:"flex-1 overflow-auto",children:e})]})]})}function z({children:e}){return s.jsx("html",{lang:"en",className:"dark",children:s.jsx("body",{className:`${n().className} bg-bg-primary text-text-primary min-h-screen`,children:s.jsx(L,{children:s.jsx(K,{children:e})})})})}},6792:(e,t,r)=>{"use strict";r.d(t,{C:()=>c});var s=r(326),a=r(9360),n=r(1223);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-accent-blue text-white hover:bg-accent-blue/80",secondary:"border-transparent bg-bg-tertiary text-text-primary hover:bg-bg-tertiary/80",outline:"text-text-primary",success:"border-transparent bg-accent-green text-white hover:bg-accent-green/80",warning:"border-transparent bg-accent-amber text-white hover:bg-accent-amber/80",danger:"border-transparent bg-accent-red text-white hover:bg-accent-red/80"}},defaultVariants:{variant:"default"}});function c({className:e,variant:t,...r}){return s.jsx("div",{className:(0,n.cn)(i({variant:t}),e),...r})}},9843:(e,t,r)=>{"use strict";r.d(t,{P:()=>i});var s=r(4976),a=r(7369);r(7577);var n=r(2777);function i(e){(0,s.NL)();let t=(0,a.a)({queryKey:["agents",e],queryFn:async()=>{let t=n.O.from("subagent_runs").select("*").neq("name","sage-main-status").order("started_at",{ascending:!1});e&&(t=t.eq("status",e));let{data:r,error:s}=await t;if(s)throw s;return r}});return{agents:t.data||[],isLoading:t.isLoading,error:t.error}}},4322:(e,t,r)=>{"use strict";r.d(t,{k:()=>c});var s=r(4976),a=r(7369),n=r(119);r(7577);var i=r(2777);function c(){let e=(0,s.NL)(),t=(0,a.a)({queryKey:["reviewQueue"],queryFn:async()=>{let{data:e,error:t}=await i.O.from("subagent_runs").select("*").eq("review_status","pending").order("completed_at",{ascending:!1});if(t)throw t;return e}}),r=(0,n.D)({mutationFn:async({id:e,comment:t})=>{let{error:r}=await i.O.from("subagent_runs").update({review_status:"approved",review_comment:t,reviewed_at:new Date().toISOString(),reviewed_by:"user"}).eq("id",e);if(r)throw r},onSuccess:()=>{e.invalidateQueries({queryKey:["reviewQueue"]})}}),c=(0,n.D)({mutationFn:async({id:e,comment:t})=>{let{error:r}=await i.O.from("subagent_runs").update({review_status:"rejected",review_comment:t,reviewed_at:new Date().toISOString(),reviewed_by:"user"}).eq("id",e);if(r)throw r},onSuccess:()=>{e.invalidateQueries({queryKey:["reviewQueue"]})}}),l=(0,n.D)({mutationFn:async e=>{let{error:t}=await i.O.from("subagent_runs").update({review_status:"approved",review_comment:"Bulk approved",reviewed_at:new Date().toISOString(),reviewed_by:"user"}).in("id",e);if(t)throw t},onSuccess:()=>{e.invalidateQueries({queryKey:["reviewQueue"]})}});return{reviews:t.data||[],isLoading:t.isLoading,error:t.error,approveReview:r.mutate,rejectReview:c.mutate,bulkApprove:l.mutate,isApproving:r.isPending,isRejecting:c.isPending,isBulkApproving:l.isPending}}},2777:(e,t,r)=>{"use strict";r.d(t,{O:()=>s});let s=(0,r(5157).eI)("https://kunkqedkkpwaspsucytj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt1bmtxZWRra3B3YXNwc3VjeXRqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk3Mzg4MTgsImV4cCI6MjA4NTMxNDgxOH0.gLXr1NCOSaLKGySozsDKJucOhtEDrm1OOfmbj7Z7-1o")},1223:(e,t,r)=>{"use strict";r.d(t,{SY:()=>c,aF:()=>l,cn:()=>n,p6:()=>i});var s=r(1135),a=r(1009);function n(...e){return(0,a.m6)((0,s.W)(e))}function i(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(new Date(e))}function c(e){let t=new Date,r=new Date(e),s=Math.floor((t.getTime()-r.getTime())/1e3);return s<60?"just now":s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:`${Math.floor(s/86400)}d ago`}function l(e,t){return e.length<=t?e:e.slice(0,t)+"..."}},2029:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>c});var s=r(8570);let a=(0,s.createProxy)(String.raw`/Users/moltbot/clawd/sage-dashboard-v2/src/app/layout.tsx`),{__esModule:n,$$typeof:i}=a;a.default;let c=(0,s.createProxy)(String.raw`/Users/moltbot/clawd/sage-dashboard-v2/src/app/layout.tsx#default`)},3824:()=>{}};