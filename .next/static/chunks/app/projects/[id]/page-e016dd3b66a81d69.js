(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{19705:function(e,t,s){Promise.resolve().then(s.bind(s,1203))},1203:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return M}});var a=s(57437),r=s(2265),n=s(16463),i=s(21513),l=s(6760),c=s(64608),d=s(649),o=s(34446),u=s(77515),m=s(40933),x=s(208),h=s(75733),b=s(73772),p=s(42421),g=s(87592),f=s(24241),j=s(49354);let v={todo:{variant:"secondary",icon:u.Z,label:"To Do"},in_progress:{variant:"default",icon:m.Z,label:"In Progress"},blocked:{variant:"danger",icon:x.Z,label:"Blocked"},review:{variant:"warning",icon:h.Z,label:"Review"},done:{variant:"success",icon:b.Z,label:"Done"}},y={low:{variant:"secondary",label:"Low"},medium:{variant:"warning",label:"Medium"},high:{variant:"danger",label:"High"},urgent:{variant:"danger",label:"Urgent"}};function N(e){let{task:t,onToggleComplete:s,onUpdateTitle:n,onOpenModal:c,subtasks:o,onToggleExpand:u,isExpanded:m,level:x=0}=e,[h,b]=(0,r.useState)(!1),[N,w]=(0,r.useState)(t.title),k=()=>{N.trim()&&N!==t.title&&n(t.id,N.trim()),b(!1)},C=v[t.status],_=y[t.priority],Z=o&&o.length>0;return(0,a.jsxs)(i.E.div,{layout:!0,className:(0,j.cn)("group flex items-center gap-3 p-3 rounded-lg hover:bg-bg-tertiary/50 transition-colors cursor-pointer border border-transparent hover:border-border-subtle",x>0&&"ml-6 border-l-2 border-border-default","done"===t.status&&"opacity-60"),onClick:()=>c(t.id),children:[(0,a.jsx)("div",{onClick:e=>e.stopPropagation(),children:(0,a.jsx)("input",{type:"checkbox",checked:"done"===t.status,onChange:()=>s(t.id),className:"w-4 h-4 rounded border-border-default bg-bg-secondary text-accent-blue focus:ring-accent-blue"})}),Z&&(0,a.jsx)(l.z,{variant:"ghost",size:"icon",className:"h-6 w-6 p-0 hover:bg-bg-tertiary",onClick:e=>{e.stopPropagation(),null==u||u()},children:m?(0,a.jsx)(p.Z,{className:"h-4 w-4"}):(0,a.jsx)(g.Z,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"flex-1 min-w-0",onClick:e=>e.stopPropagation(),children:h?(0,a.jsx)("input",{value:N,onChange:e=>w(e.target.value),onBlur:k,onKeyDown:e=>{"Enter"===e.key?k():"Escape"===e.key&&(w(t.title),b(!1))},className:"w-full bg-transparent border-none outline-none text-text-primary placeholder-text-muted",autoFocus:!0}):(0,a.jsx)("div",{className:(0,j.cn)("text-sm font-medium text-text-primary truncate","done"===t.status&&"line-through"),onClick:()=>{h||b(!0)},children:t.title})}),(0,a.jsxs)(d.C,{variant:C.variant,className:"text-xs",children:[(0,a.jsx)(C.icon,{className:"h-3 w-3 mr-1"}),C.label]}),(0,a.jsx)(d.C,{variant:_.variant,className:"text-xs",children:_.label}),t.assigned_to&&(0,a.jsx)("div",{className:"flex items-center gap-1 text-xs text-text-muted",children:(0,a.jsx)("div",{className:"w-6 h-6 rounded-full bg-accent-blue flex items-center justify-center text-white text-xs font-medium",children:t.assigned_to.charAt(0).toUpperCase()})}),t.due_date&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-text-muted",children:[(0,a.jsx)(f.Z,{className:"h-3 w-3"}),(0,j.p6)(t.due_date)]})]})}var w=s(92513),k=s(15574),C=s(54775);function _(e){let{tasks:t,onToggleComplete:s,onUpdateTitle:n,onOpenModal:d,onReorderTasks:u,onCreateTask:m,isLoading:x=!1}=e,[h,b]=(0,r.useState)("flat"),[p,g]=(0,r.useState)(""),[f,j]=(0,r.useState)(new Set),v=e=>{let t=new Set(f);t.has(e)?t.delete(e):t.add(e),j(t)},y=()=>{p.trim()&&(m(p.trim()),g(""))},_=e=>{"Enter"===e.key&&y()},Z=t.reduce((e,t)=>(e[t.status]||(e[t.status]=[]),e[t.status].push(t),e),{}),z=e=>t.filter(t=>t.parent_task_id===e),D=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=z(e.id),l=f.has(e.id);return(0,a.jsxs)("div",{children:[(0,a.jsx)(N,{task:e,onToggleComplete:s,onUpdateTitle:n,onOpenModal:d,subtasks:r,onToggleExpand:()=>v(e.id),isExpanded:l,level:t}),(0,a.jsx)(o.M,{children:l&&r.map(e=>(0,a.jsx)(i.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:D(e,t+1)},e.id))})]},e.id)};return x?(0,a.jsx)(c.Zb,{className:"p-6",children:(0,a.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-bg-tertiary/50 animate-pulse",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-bg-secondary rounded"}),(0,a.jsx)("div",{className:"flex-1 h-4 bg-bg-secondary rounded"}),(0,a.jsx)("div",{className:"w-16 h-6 bg-bg-secondary rounded-full"})]},t))})}):0===t.length?(0,a.jsxs)(c.Zb,{className:"p-12 text-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No tasks yet"}),(0,a.jsx)("p",{className:"text-text-muted mb-4",children:"Add tasks to get started."}),(0,a.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,a.jsx)("input",{value:p,onChange:e=>g(e.target.value),onKeyDown:_,placeholder:"Add a task...",className:"flex-1 px-3 py-2 bg-bg-secondary border border-border-default rounded-md text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent-blue"}),(0,a.jsx)(l.z,{onClick:y,disabled:!p.trim(),children:(0,a.jsx)(w.Z,{className:"h-4 w-4"})})]})]}):(0,a.jsxs)(c.Zb,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Tasks"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(l.z,{variant:"flat"===h?"default":"ghost",size:"sm",onClick:()=>b("flat"),children:[(0,a.jsx)(k.Z,{className:"h-4 w-4 mr-2"}),"Flat"]}),(0,a.jsxs)(l.z,{variant:"grouped"===h?"default":"ghost",size:"sm",onClick:()=>b("grouped"),children:[(0,a.jsx)(C.Z,{className:"h-4 w-4 mr-2"}),"Grouped"]})]})]}),(0,a.jsx)("div",{className:"space-y-1 mb-4",children:"flat"===h?t.filter(e=>!e.parent_task_id).sort((e,t)=>e.order_index-t.order_index).map(e=>D(e)):Object.entries(Z).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("h4",{className:"text-sm font-medium text-text-secondary mb-3 capitalize",children:[t.replace("_"," ")," (",s.length,")"]}),(0,a.jsx)("div",{className:"space-y-1",children:s.filter(e=>!e.parent_task_id).sort((e,t)=>e.order_index-t.order_index).map(e=>D(e))})]},t)})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{value:p,onChange:e=>g(e.target.value),onKeyDown:_,placeholder:"Add a task...",className:"flex-1 px-3 py-2 bg-bg-secondary border border-border-default rounded-md text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent-blue"}),(0,a.jsx)(l.z,{onClick:y,disabled:!p.trim(),children:(0,a.jsx)(w.Z,{className:"h-4 w-4"})})]})]})}var Z=s(74697),z=s(10883);let D=[{value:"todo",label:"To Do"},{value:"in_progress",label:"In Progress"},{value:"blocked",label:"Blocked"},{value:"review",label:"Review"},{value:"done",label:"Done"}],O=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}],S=["sage","tim","both"];function T(e){let{task:t,isOpen:s,onClose:n,onUpdate:c,onDelete:d,onCreateSubtask:u,currentUser:m="sage"}=e,[x,h]=(0,r.useState)({}),[b,p]=(0,r.useState)(""),[g,f]=(0,r.useState)(!1);if(r.useEffect(()=>{t&&h(t)},[t]),!t)return null;let j=async()=>{confirm("Are you sure you want to delete this task? This action cannot be undone.")&&(f(!0),d(t.id),n())},v=()=>{b.trim()&&(u(t.id,b.trim()),p(""))};return(0,a.jsx)(o.M,{children:s&&(0,a.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:n,children:(0,a.jsxs)(i.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-bg-secondary rounded-lg shadow-lg max-w-2xl w-full max-h-[90vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border-default",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-text-primary",children:"Task Details"}),(0,a.jsx)(l.z,{variant:"ghost",size:"icon",onClick:n,children:(0,a.jsx)(Z.Z,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6 max-h-[calc(90vh-140px)] overflow-y-auto",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Title"}),(0,a.jsx)("input",{type:"text",value:x.title||"",onChange:e=>h(t=>({...t,title:e.target.value})),className:"w-full px-3 py-2 bg-bg-primary border border-border-default rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent-blue"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Description"}),(0,a.jsx)("textarea",{value:x.description||"",onChange:e=>h(t=>({...t,description:e.target.value})),rows:4,className:"w-full px-3 py-2 bg-bg-primary border border-border-default rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent-blue resize-none",placeholder:"Add a description..."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Status"}),(0,a.jsx)("select",{value:x.status||t.status,onChange:e=>h(t=>({...t,status:e.target.value})),className:"w-full px-3 py-2 bg-bg-primary border border-border-default rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent-blue",children:D.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Priority"}),(0,a.jsx)("select",{value:x.priority||t.priority,onChange:e=>h(t=>({...t,priority:e.target.value})),className:"w-full px-3 py-2 bg-bg-primary border border-border-default rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent-blue",children:O.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Assignee"}),(0,a.jsxs)("select",{value:x.assigned_to||t.assigned_to||"",onChange:e=>h(t=>({...t,assigned_to:e.target.value||void 0})),className:"w-full px-3 py-2 bg-bg-primary border border-border-default rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent-blue",children:[(0,a.jsx)("option",{value:"",children:"Unassigned"}),S.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Due Date"}),(0,a.jsx)("input",{type:"date",value:x.due_date||t.due_date||"",onChange:e=>h(t=>({...t,due_date:e.target.value||void 0})),className:"w-full px-3 py-2 bg-bg-primary border border-border-default rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent-blue"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Estimated Hours"}),(0,a.jsx)("input",{type:"number",min:"0",step:"0.5",value:x.estimated_hours||t.estimated_hours||"",onChange:e=>h(t=>({...t,estimated_hours:parseFloat(e.target.value)||void 0})),className:"w-full px-3 py-2 bg-bg-primary border border-border-default rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent-blue"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Actual Hours"}),(0,a.jsx)("input",{type:"number",min:"0",step:"0.5",value:x.actual_hours||t.actual_hours||"",onChange:e=>h(t=>({...t,actual_hours:parseFloat(e.target.value)||void 0})),className:"w-full px-3 py-2 bg-bg-primary border border-border-default rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent-blue"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Subtasks"}),(0,a.jsx)("div",{className:"space-y-2 mb-3",children:(0,a.jsx)("div",{className:"text-sm text-text-muted",children:"Subtasks will be listed here"})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{value:b,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"===e.key&&v()},placeholder:"Add a subtask...",className:"flex-1 px-3 py-2 bg-bg-primary border border-border-default rounded-md text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent-blue"}),(0,a.jsx)(l.z,{onClick:v,disabled:!b.trim(),children:(0,a.jsx)(w.Z,{className:"h-4 w-4"})})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-t border-border-default",children:[(0,a.jsxs)(l.z,{variant:"danger",onClick:j,disabled:g,children:[(0,a.jsx)(z.Z,{className:"h-4 w-4 mr-2"}),"Delete Task"]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(l.z,{variant:"outline",onClick:n,children:"Cancel"}),(0,a.jsx)(l.z,{onClick:()=>{c(t.id,x),n()},children:"Save Changes"})]})]})]})})})}var E=s(95137),I=s(52022),P=s(53225),R=s(72216);function M(){var e;let t=(0,n.useParams)(),s=(0,n.useRouter)(),o=t.id,{project:u,isLoading:m,error:x}=(0,R.PY)(o),h=(null==u?void 0:u.tasks)||[],[b,p]=(0,r.useState)(null),[g,v]=(0,r.useState)(!1),y=(e,t)=>{console.log("Create task:",e,t)},N=h.find(e=>e.id===b)||null;return m?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 bg-bg-tertiary rounded mb-6"}),(0,a.jsx)("div",{className:"h-32 bg-bg-tertiary rounded"})]})}):x||!u?(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Project Not Found"}),(0,a.jsx)(c.Zb,{className:"p-6",children:(0,a.jsxs)("p",{className:"text-text-red",children:["Error loading project: ",(null==x?void 0:x.message)||"Project not found"]})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-bg-primary",children:[(0,a.jsx)("div",{className:"border-b border-border-default bg-bg-secondary",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)(l.z,{variant:"ghost",onClick:()=>s.push("/projects"),className:"mb-4",children:[(0,a.jsx)(E.Z,{className:"h-4 w-4 mr-2"}),"Back to Projects"]}),(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:u.name}),(0,a.jsx)("p",{className:"text-text-muted mb-4",children:u.description}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-text-primary",children:"Progress"}),(0,a.jsxs)("span",{className:"text-sm text-text-muted",children:[u.progress,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-bg-tertiary rounded-full h-2",children:(0,a.jsx)(i.E.div,{className:"bg-accent-blue h-2 rounded-full",initial:{width:0},animate:{width:"".concat(u.progress,"%")},transition:{duration:.5}})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-text-muted",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),"Due ",u.due_date?(0,j.p6)(u.due_date):"No due date"]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(I.Z,{className:"h-4 w-4"}),u.owner]}),(0,a.jsx)(d.C,{variant:"outline",children:u.status}),(0,a.jsx)(d.C,{variant:"urgent"===u.priority?"danger":"high"===u.priority?"warning":"secondary",children:u.priority})]})]})})]})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)(_,{tasks:h,onToggleComplete:e=>{console.log("Toggle complete:",e)},onUpdateTitle:(e,t)=>{console.log("Update title:",e,t)},onOpenModal:e=>{p(e),v(!0)},onReorderTasks:e=>{console.log("Reorder tasks:",e)},onCreateTask:y})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(c.Zb,{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Project Details"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-text-secondary",children:"Tags"}),(0,a.jsx)("div",{className:"flex gap-2 mt-1",children:null===(e=u.tags)||void 0===e?void 0:e.map(e=>(0,a.jsx)(d.C,{variant:"secondary",children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-text-secondary",children:"Created"}),(0,a.jsx)("p",{className:"text-sm text-text-primary",children:(0,j.p6)(u.created_at)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-text-secondary",children:"Last Updated"}),(0,a.jsx)("p",{className:"text-sm text-text-primary",children:(0,j.p6)(u.updated_at)})]})]})]}),(0,a.jsxs)(c.Zb,{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Recent Activity"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-accent-blue flex items-center justify-center",children:(0,a.jsx)(P.Z,{className:"h-4 w-4 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-text-primary",children:'Task "Implement authentication" was completed'}),(0,a.jsx)("p",{className:"text-xs text-text-muted",children:"2 hours ago"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-accent-green flex items-center justify-center",children:(0,a.jsx)(I.Z,{className:"h-4 w-4 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-text-primary",children:"Sage joined the project"}),(0,a.jsx)("p",{className:"text-xs text-text-muted",children:"1 day ago"})]})]})]})]})]})]})}),(0,a.jsx)(T,{task:N,isOpen:g,onClose:()=>{v(!1),p(null)},onUpdate:(e,t)=>{console.log("Update task:",e,t)},onDelete:e=>{console.log("Delete task:",e)},onCreateSubtask:y})]})}},649:function(e,t,s){"use strict";s.d(t,{C:function(){return l}});var a=s(57437),r=s(13027),n=s(49354);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-accent-blue text-white hover:bg-accent-blue/80",secondary:"border-transparent bg-bg-tertiary text-text-primary hover:bg-bg-tertiary/80",outline:"text-text-primary",success:"border-transparent bg-accent-green text-white hover:bg-accent-green/80",warning:"border-transparent bg-accent-amber text-white hover:bg-accent-amber/80",danger:"border-transparent bg-accent-red text-white hover:bg-accent-red/80"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:s}),t),...r})}},6760:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var a=s(57437),r=s(2265),n=s(13027),i=s(49354);let l=(0,n.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-bg-primary",{variants:{variant:{default:"bg-accent-blue text-white hover:bg-accent-blue/80",secondary:"bg-bg-tertiary text-text-primary hover:bg-bg-tertiary/80",outline:"border border-border-default bg-transparent text-text-primary hover:bg-bg-tertiary",ghost:"bg-transparent text-text-primary hover:bg-bg-tertiary",success:"bg-accent-green text-white hover:bg-accent-green/80",danger:"bg-accent-red text-white hover:bg-accent-red/80"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=(0,r.forwardRef)((e,t)=>{let{className:s,variant:r,size:n,asChild:c=!1,...d}=e;return(0,a.jsx)("button",{className:(0,i.cn)(l({variant:r,size:n,className:s})),ref:t,...d})});c.displayName="Button"},64608:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},Zb:function(){return i},aY:function(){return d},ll:function(){return c}});var a=s(57437),r=s(2265),n=s(49354);let i=(0,r.forwardRef)((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border border-border-subtle bg-bg-secondary text-text-primary shadow-sm",s),...r})});i.displayName="Card";let l=(0,r.forwardRef)((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});l.displayName="CardHeader";let c=(0,r.forwardRef)((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});c.displayName="CardTitle",(0,r.forwardRef)((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-text-muted",s),...r})}).displayName="CardDescription";let d=(0,r.forwardRef)((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent",(0,r.forwardRef)((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},72216:function(e,t,s){"use strict";s.d(t,{PY:function(){return d},Qs:function(){return o},Z0:function(){return c}});var a=s(93191),r=s(76351),n=s(25524),i=s(2265),l=s(44316);function c(){let e=(0,a.NL)(),t=(0,r.a)({queryKey:["projects"],queryFn:async()=>{let{data:e,error:t}=await l.O.from("projects").select("*").order("created_at",{ascending:!1});if(t)throw t;return e}});return(0,i.useEffect)(()=>{let t=l.O.channel("projects_changes").on("postgres_changes",{event:"*",schema:"public",table:"projects"},t=>{e.invalidateQueries({queryKey:["projects"]})}).subscribe();return()=>{l.O.removeChannel(t)}},[e]),{projects:t.data||[],isLoading:t.isLoading,error:t.error}}function d(e){let t=(0,a.NL)(),s=(0,r.a)({queryKey:["project",e],queryFn:async()=>{let{data:t,error:s}=await l.O.from("projects").select("*").eq("id",e).single();if(s)throw s;let{data:a,error:r}=await l.O.from("tasks").select("*").eq("project_id",e).order("order_index",{ascending:!0});if(r)throw r;return{...t,tasks:a}},enabled:!!e});return(0,i.useEffect)(()=>{if(!e)return;let s=l.O.channel("project_".concat(e,"_changes")).on("postgres_changes",{event:"*",schema:"public",table:"projects",filter:"id=eq.".concat(e)},s=>{t.invalidateQueries({queryKey:["project",e]})}).subscribe(),a=l.O.channel("project_".concat(e,"_tasks_changes")).on("postgres_changes",{event:"*",schema:"public",table:"tasks",filter:"project_id=eq.".concat(e)},s=>{t.invalidateQueries({queryKey:["project",e]})}).subscribe();return()=>{l.O.removeChannel(s),l.O.removeChannel(a)}},[t,e]),{project:s.data,isLoading:s.isLoading,error:s.error}}function o(){let e=(0,a.NL)();return(0,n.D)({mutationFn:async e=>{let{data:t,error:s}=await l.O.from("projects").insert(e).select().single();if(s)throw s;return t},onSuccess:()=>{e.invalidateQueries({queryKey:["projects"]})}})}},44316:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});let a=(0,s(17327).eI)("https://kunkqedkkpwaspsucytj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt1bmtxZWRra3B3YXNwc3VjeXRqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk3Mzg4MTgsImV4cCI6MjA4NTMxNDgxOH0.gLXr1NCOSaLKGySozsDKJucOhtEDrm1OOfmbj7Z7-1o")},49354:function(e,t,s){"use strict";s.d(t,{SY:function(){return l},aF:function(){return c},cn:function(){return n},p6:function(){return i}});var a=s(44839),r=s(96164);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}function i(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(new Date(e))}function l(e){let t=new Date,s=new Date(e),a=Math.floor((t.getTime()-s.getTime())/1e3);return a<60?"just now":a<3600?"".concat(Math.floor(a/60),"m ago"):a<86400?"".concat(Math.floor(a/3600),"h ago"):"".concat(Math.floor(a/86400),"d ago")}function c(e,t){return e.length<=t?e:e.slice(0,t)+"..."}}},function(e){e.O(0,[289,176,842,322,971,23,744],function(){return e(e.s=19705)}),_N_E=e.O()}]);